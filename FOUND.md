# FOUND (2026-02-03)

- [Infra/docs] API host mismatch: backend is configured for `api-david.longhouse.ai`, but TODO Domain Split still references `api.david.longhouse.ai`. `curl https://api-david.longhouse.ai/health` returns 200; `curl https://api.david.longhouse.ai/health` fails, and container labels only include `api-david.longhouse.ai`.
- [Infra/docs] `longhouse.ai/install.sh` serves the SPA HTML (not the installer). The working installer URL is `get.longhouse.ai/install.sh` (302 to GitHub raw). VISION + `scripts/install.sh` comment still point to `https://longhouse.ai/install.sh`.
- [Infra/docs] Wildcard DNS claim is stale: `dig foo.longhouse.ai` returns no records, so `*.longhouse.ai` does not appear to be configured despite VISION saying it is.
- [Infra/docs] DB size is outdated: docs say `/data/longhouse.db (~2.5GB)` but current file is ~3.5GB (`/data/longhouse.db`). Update TODO + LAUNCH-PLAN.
- [Docs vs code] Install script installs Python 3.11, but `pyproject.toml` requires `>=3.12`. `scripts/install.sh` should install 3.12+ (or lower the requirement).
- [Docs vs code] Shipper defaults to `http://localhost:47300`, while `longhouse serve` defaults to 8080 and README uses 8080. Running `longhouse connect` with no `--url` will target the wrong port.
- [Docs vs code] VISION mentions `longhouse up` and port `30080` for OSS. CLI is `longhouse serve` and default port is `8080`.
- [Docs vs code] VISION claims FTS5-powered timeline search; current search is `ilike` join on events (no FTS5 tables/queries present).
- [Docs vs code] VISION says job claiming is dialect-aware (Postgres `FOR UPDATE SKIP LOCKED`). `commis_job_queue.py` is SQLite-specific (`datetime('now')`, `UPDATE ... RETURNING`) and is imported unconditionally in `commis_job_processor.py`.
- [Docs vs code] Workspace paths in VISION are `~/.longhouse/workspaces/...` and artifacts in `~/.longhouse/artifacts`, but current defaults are `/var/oikos/workspaces` and `settings.data_dir` (`/data` in Docker or repo `data/`). Session resume temp workspaces default to `/tmp/zerg-session-workspaces`.
- [Docs vs code] VISION control-plane section lists `apps/control-plane/` file tree, but no such directory exists in repo (plan vs reality is unclear).
- [Docs vs infra] VISION control-plane routing assumes Traefik labels; current infra uses Caddy (coolify-proxy with Caddy labels). If Traefik is intended, docs should say so and note migration.
- [Docs vs release] PyPI latest is `longhouse` 0.1.1, but repo `pyproject.toml` is 0.1.2. LAUNCH-PLAN still claims no PyPI package; README implies `pip install` yields current features.
- [Docs vs code] README + HN launch copy claim search across Claude/Codex/Cursor/Gemini, but shipper/parser only supports Claude Code JSONL. Demo seeds include Codex/Gemini, but real ingest is Claude-only.
- [Docs] HN_LAUNCH.md says MIT license; repo LICENSE and pyproject are Apache-2.0.
- [Docs] HN_LAUNCH.md checklist says “README has screenshot (done!)” but README has no image.
- [Docs] HN_LAUNCH.md says demo data seeds on first run; current behavior requires `--demo/--demo-fresh` or calling the demo seed endpoint.
- [Docs] VISION repeatedly references `brew install longhouse`, but there is no Homebrew formula in repo or release workflow.
- [Docs conflict] LAUNCH-PLAN hosted beta suggests provisioning via Coolify API; VISION explicitly says not to use Coolify for dynamic provisioning.
- [Docs vs code] VISION onboarding-contract example is Docker-centric (`cp .env.example`, `docker compose up`), but README’s contract runs bun+uv + `longhouse serve`; VISION’s example is stale.
- [Docs vs code] VISION says `longhouse connect <url>` installs and starts the shipper; actual CLI only installs when `--install` is passed (default runs foreground watch/poll).
- [Docs vs code] VISION says device token is issued during `longhouse connect`; actual flow requires manual token creation in UI (`/dashboard/settings/devices`) and paste into CLI.
- [Docs vs code] VISION specifies shipper batching “1 second or 100 events”; implementation ships per file with no time-window batching (only `batch_size` for spool replay).
- [Docs vs code] VISION says shipper replay uses idempotency keys; shipper does not send idempotency keys/headers (dedupe relies on DB unique index).
- [Docs vs UI] “Resume from anywhere / Timeline resume” is not in Timeline UI; resume is only implemented in Forum Drop‑In (Claude-only) and not exposed on `/timeline`.
- [Docs vs code] VISION lists Oikos discovery tools (`search_sessions`, `grep_sessions`, `filter_sessions`, `get_session_detail`) but no such tool implementations exist.
- [Docs vs code] VISION says cross‑subdomain auth tokens are one‑time with nonce stored server‑side and validated via control plane/JWKS; current `POST /api/auth/accept-token` just validates JWT and sets cookie (no nonce/one‑time guard).
- [Docs/infra] `install-claude.sh` is broken: `longhouse.ai/install-claude.sh` serves the SPA HTML, `get.longhouse.ai/install-claude.sh` redirects to `scripts/install-claude.sh` which 404s, and the repo only contains `scripts/install-claude-shim.sh`.
- [Docs vs code] VISION requires a PATH‑based Claude shim + verification in a fresh shell; current installer only adds a hook unless `~/.longhouse/install-claude-shim.sh` already exists and does not verify in a new shell.
- [Docs] QA_PLAN says onboarding contract is still Docker‑centric; README contract now uses bun+uv + `longhouse serve` (SQLite), so this gap statement is stale.
- [Docs] HN_LAUNCH claims session files in `~/.codex/sessions/*` etc; current shipper/parser only reads Claude Code (`~/.claude/projects/...`).
- [Docs vs code] Password‑only auth isn’t actually possible in production: `_validate_required()` always requires `GOOGLE_CLIENT_ID/SECRET` when `AUTH_DISABLED=0`, even if `LONGHOUSE_PASSWORD[_HASH]` is set. README/LAUNCH-PLAN imply password-only is supported.
- [Docs vs code] `session_continuity.py` defaults `LONGHOUSE_API_URL` to `http://localhost:47300`, conflicting with `longhouse serve` default 8080 and README.
- [Docs vs UI] `longhouse auth` instructs users to open `/dashboard/settings/devices`, but there is no device‑token UI or route; frontend only has `/settings` and no device token page.
- [Code inconsistency] `WorkspaceManager` defaults to `/var/oikos/workspaces` while settings default `OIKOS_WORKSPACE_PATH` to `~/.longhouse/workspaces`; local OSS may try to write to `/var/oikos` without permission.
- [Docs vs UI] VISION describes a 3‑step guided empty state with “Load demo” CTA; Timeline empty state is a single sentence (“Run 'longhouse ship'”) with no demo button.
- [Docs vs repo] README “Docker” install says `docker compose up`, but there is no root `docker-compose.yml` or `compose.yaml`; Docker configs live under `docker/` (e.g., `docker/docker-compose.dev.yml`).
- [Docs vs code] `apps/runner/README.md` uses `LONGHOUSE_URL=http://localhost:30080` for dev/Docker; runner defaults to `ws://localhost:47300` and `longhouse serve` uses 8080, so the example points at the wrong port/service.
- [Docs vs code] `experiments/shipper-manual-validation.md` is legacy: uses `zerg` CLI, old token/url files (`zerg-device-token`, `zerg-url`), old launchd label `com.swarmlet.shipper`, old frontend port 30080, and claims no sessions UI exists (Timeline now exists).
- [Docs vs code] `apps/zerg/backend/docs/specs/shipper.md` still documents `zerg` commands and `~/.claude/zerg-device-token`; current CLI is `longhouse` and tokens are stored at `~/.claude/longhouse-device-token` (legacy `zerg-` paths are migration-only).
- [Docs] `apps/zerg/backend/docs/supervisor_tools.md` references non-existent paths/tests: `apps/zerg/backend/docs/oikos_tools.md`, `examples/oikos_tools_demo.py`, `tests/test_oikos_tools.py`, `tests/test_oikos_tools_integration.py`, and “20/20 tests passing” despite those files not existing (only `tests/tools/test_oikos_tools_errors.py` exists).
- [Docs vs code] `oikos_react_engine.py` module docstring claims “spawn_commis raises FicheInterrupted directly”; in parallel execution `_execute_tools_parallel` uses two‑phase commit and does NOT raise FicheInterrupted (returns ToolMessages + interrupt_value instead).
- [Docs vs code] `jobs/git_sync.py` class docstring says “Thread-safety: Uses file lock,” but the implementation is async with asyncio + `asynccontextmanager` and `asyncio.to_thread`; it’s concurrency-safety, not thread-safety.
- [Bug] `jobs/commis.py` `_run_job` returns early if `extend_lease` fails before execution, leaving the job in `claimed` state until lease expiry (no reschedule/mark-dead handling).
- [Bug] `GitSyncService._get_auth_url()` mangles SSH-style repo URLs when `token` is set (e.g., `git@github.com:user/repo.git` → malformed `@@` URL); should reject token auth for SSH URLs or handle separately.
- [Docs vs code] Slack skill doc is wrong: `apps/zerg/backend/zerg/skills/bundled/slack/SKILL.md` references `slack_send_message` and `SLACK_BOT_TOKEN`, but the actual tool is `send_slack_webhook` and it uses incoming webhook URLs (connector/env), not a bot token.
- [Docs vs code] README features claim “FTS5‑powered” search; backend search is `ilike`-based with no FTS5 tables/queries.
- [Docs vs code] `scripts/install.sh` WSL warning tells users to run `longhouse connect --foreground`, but the CLI has no `--foreground` flag (foreground is the default).
- [Docs vs code] `services/shipper/spool.py` docstring claims replay uses idempotency keys, but the shipper does not send idempotency keys (dedupe relies on DB unique constraints).
- [Docs vs code] GitHub skill doc says `GITHUB_TOKEN` env var works; `github_tools` only resolves tokens from connectors or explicit parameters (no env fallback).
- [Docs vs code] Web search skill docs omit required `TAVILY_API_KEY`: `web_search` errors when the env var is missing, but `apps/zerg/backend/zerg/skills/bundled/web-search/SKILL.md` has no env requirement and is marked `always: true`.
- [Docs/infra] `scripts/install-runner.sh` advertises `curl -sSL https://longhouse.ai/install-runner.sh | bash`, but that URL serves the SPA HTML; the working installer URL is `https://get.longhouse.ai/install-runner.sh` (redirects to raw GitHub).
- [Docs vs infra] VISION Life Hub config uses `ZERG_API_URL=https://longhouse.ai/api`, but `https://longhouse.ai/api/*` returns 502; the working API host is `https://api.longhouse.ai`.
