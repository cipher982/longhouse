<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perspective Grid Test</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #030305;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, sans-serif;
      padding: 20px;
      overflow-x: hidden;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 24px;
      color: #6366f1;
    }

    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(30, 30, 45, 0.9);
      border: 1px solid #6366f1;
      border-radius: 8px;
      padding: 20px;
      max-width: 300px;
      backdrop-filter: blur(8px);
      z-index: 1000;
    }

    .control-group {
      margin-bottom: 15px;
    }

    .control-group label {
      display: block;
      margin-bottom: 5px;
      font-size: 12px;
      color: #94a3b8;
    }

    .control-group input[type="range"] {
      width: 100%;
    }

    .control-group input[type="number"] {
      width: 100%;
      background: #1e1e2d;
      border: 1px solid #4b5563;
      color: #e5e7eb;
      padding: 5px;
      border-radius: 4px;
    }

    .control-group select {
      width: 100%;
      background: #1e1e2d;
      border: 1px solid #4b5563;
      color: #e5e7eb;
      padding: 5px;
      border-radius: 4px;
    }

    .value-display {
      font-size: 11px;
      color: #06b6d4;
      margin-top: 2px;
    }

    button {
      width: 100%;
      padding: 8px;
      background: #6366f1;
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
      margin-top: 10px;
      font-size: 12px;
    }

    button:hover {
      background: #4f46e5;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
      margin-top: 20px;
      margin-right: 320px;
    }

    .test-box {
      position: relative;
      height: 400px;
      background: #0a0a0f;
      border: 1px solid #374151;
      border-radius: 8px;
      overflow: hidden;
    }

    .test-label {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: rgba(99, 102, 241, 0.9);
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
    }

    .grid-overlay {
      position: absolute;
      bottom: 0;
      left: -50%;
      width: 200%;
      height: 60%;
      pointer-events: none;
      z-index: 0;
    }

    /* Test 1: Current broken version */
    .grid-1 {
      background-image:
        linear-gradient(rgba(99, 102, 241, 0.3) 1px, transparent 1px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.15) 1px, transparent 1px);
      background-size: 60px 60px;
      transform: perspective(400px) rotateX(75deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent 60%);
    }

    /* Test 2: Fixed perspective value */
    .grid-2 {
      background-image:
        linear-gradient(rgba(99, 102, 241, 0.3) 1px, transparent 1px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.15) 1px, transparent 1px);
      background-size: 60px 60px;
      transform: perspective(500px) rotateX(60deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent 60%);
    }

    /* Test 3: No mask */
    .grid-3 {
      background-image:
        linear-gradient(rgba(99, 102, 241, 0.3) 1px, transparent 1px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.15) 1px, transparent 1px);
      background-size: 60px 60px;
      transform: perspective(500px) rotateX(60deg);
      transform-origin: center bottom;
    }

    /* Test 4: Brighter grid */
    .grid-4 {
      background-image:
        linear-gradient(rgba(99, 102, 241, 0.8) 2px, transparent 2px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.4) 2px, transparent 2px);
      background-size: 60px 60px;
      transform: perspective(500px) rotateX(60deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent 70%);
    }

    /* Test 5: Animated version */
    .grid-5 {
      background-image:
        linear-gradient(rgba(99, 102, 241, 0.6) 2px, transparent 2px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.3) 2px, transparent 2px);
      background-size: 60px 60px;
      transform: perspective(500px) rotateX(60deg) translateY(0);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent 70%);
      animation: grid-drift 15s linear infinite;
    }

    @keyframes grid-drift {
      0% {
        transform: perspective(500px) rotateX(60deg) translateY(0);
      }
      100% {
        transform: perspective(500px) rotateX(60deg) translateY(60px);
      }
    }

    /* Test 6: Custom controllable grid */
    .grid-6 {
      background-image:
        linear-gradient(rgba(99, 102, 241, var(--opacity-h)) var(--thickness)px, transparent var(--thickness)px),
        linear-gradient(90deg, rgba(99, 102, 241, var(--opacity-v)) var(--thickness)px, transparent var(--thickness)px);
      background-size: var(--grid-size)px var(--grid-size)px;
      transform: perspective(var(--perspective)px) rotateX(var(--rotation)deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent var(--mask-fade)%);
    }

    /* Synthwave variant */
    .grid-7 {
      background-image:
        linear-gradient(rgba(236, 72, 153, 0.6) 2px, transparent 2px),
        linear-gradient(90deg, rgba(6, 182, 212, 0.4) 2px, transparent 2px);
      background-size: 80px 80px;
      transform: perspective(600px) rotateX(65deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, black 0%, transparent 75%);
    }

    /* Tron-style */
    .grid-8 {
      background-image:
        linear-gradient(rgba(6, 182, 212, 0.8) 1px, transparent 1px),
        linear-gradient(90deg, rgba(6, 182, 212, 0.8) 1px, transparent 1px);
      background-size: 50px 50px;
      transform: perspective(400px) rotateX(70deg);
      transform-origin: center bottom;
      mask-image: linear-gradient(to top, rgba(0,0,0,1) 0%, transparent 60%);
      box-shadow: inset 0 -50px 100px rgba(6, 182, 212, 0.2);
    }

    .info-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(30, 30, 45, 0.9);
      border: 1px solid #06b6d4;
      border-radius: 8px;
      padding: 15px;
      max-width: 300px;
      backdrop-filter: blur(8px);
      font-size: 11px;
      line-height: 1.6;
    }

    .info-panel h3 {
      color: #06b6d4;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .status-good {
      color: #22c55e;
    }

    .status-bad {
      color: #ef4444;
    }
  </style>
</head>
<body>
  <h1>Perspective Grid Effect Debugging</h1>

  <div class="controls">
    <h3 style="margin-bottom: 15px; color: #6366f1;">Live Controls (Test 6)</h3>

    <div class="control-group">
      <label>Perspective Distance</label>
      <input type="range" id="perspective" min="200" max="1000" value="500" step="50">
      <div class="value-display" id="perspective-val">500px</div>
    </div>

    <div class="control-group">
      <label>Rotation (rotateX)</label>
      <input type="range" id="rotation" min="40" max="85" value="60" step="1">
      <div class="value-display" id="rotation-val">60deg</div>
    </div>

    <div class="control-group">
      <label>Grid Size</label>
      <input type="range" id="grid-size" min="20" max="150" value="60" step="10">
      <div class="value-display" id="grid-size-val">60px</div>
    </div>

    <div class="control-group">
      <label>Line Thickness</label>
      <input type="range" id="thickness" min="1" max="5" value="2" step="0.5">
      <div class="value-display" id="thickness-val">2px</div>
    </div>

    <div class="control-group">
      <label>Horizontal Opacity</label>
      <input type="range" id="opacity-h" min="0" max="1" value="0.6" step="0.05">
      <div class="value-display" id="opacity-h-val">0.6</div>
    </div>

    <div class="control-group">
      <label>Vertical Opacity</label>
      <input type="range" id="opacity-v" min="0" max="1" value="0.3" step="0.05">
      <div class="value-display" id="opacity-v-val">0.3</div>
    </div>

    <div class="control-group">
      <label>Mask Fade Point</label>
      <input type="range" id="mask-fade" min="50" max="100" value="70" step="5">
      <div class="value-display" id="mask-fade-val">70%</div>
    </div>

    <button onclick="resetControls()">Reset to Defaults</button>
    <button onclick="copyCSS()">Copy Test 6 CSS</button>
  </div>

  <div class="info-panel">
    <h3>Diagnostic Info</h3>
    <p><strong>Problem:</strong> Grid invisible due to:</p>
    <ul style="margin: 8px 0; padding-left: 20px;">
      <li class="status-bad">perspective() in transform (should be on parent)</li>
      <li class="status-bad">rotateX(75deg) too extreme</li>
      <li class="status-bad">opacity too low (0.3/0.15)</li>
    </ul>
    <p><strong>Solutions:</strong></p>
    <ul style="margin: 8px 0; padding-left: 20px;">
      <li class="status-good">Use rotateX(60-65deg)</li>
      <li class="status-good">Increase opacity (0.6/0.3)</li>
      <li class="status-good">Thicker lines (2px)</li>
    </ul>
  </div>

  <div class="grid-container">
    <div class="test-box">
      <div class="test-label">Test 1: Current (Broken)</div>
      <div class="grid-overlay grid-1"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 2: Fixed Perspective</div>
      <div class="grid-overlay grid-2"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 3: No Mask</div>
      <div class="grid-overlay grid-3"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 4: Brighter Grid</div>
      <div class="grid-overlay grid-4"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 5: Animated</div>
      <div class="grid-overlay grid-5"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 6: Custom (Use Controls â†’)</div>
      <div class="grid-overlay grid-6" id="custom-grid"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 7: Synthwave Style</div>
      <div class="grid-overlay grid-7"></div>
    </div>

    <div class="test-box">
      <div class="test-label">Test 8: Tron Style</div>
      <div class="grid-overlay grid-8"></div>
    </div>
  </div>

  <script>
    // Initialize custom grid
    const customGrid = document.getElementById('custom-grid');

    function updateCustomGrid() {
      const perspective = document.getElementById('perspective').value;
      const rotation = document.getElementById('rotation').value;
      const gridSize = document.getElementById('grid-size').value;
      const thickness = document.getElementById('thickness').value;
      const opacityH = document.getElementById('opacity-h').value;
      const opacityV = document.getElementById('opacity-v').value;
      const maskFade = document.getElementById('mask-fade').value;

      customGrid.style.setProperty('--perspective', perspective);
      customGrid.style.setProperty('--rotation', rotation);
      customGrid.style.setProperty('--grid-size', gridSize);
      customGrid.style.setProperty('--thickness', thickness);
      customGrid.style.setProperty('--opacity-h', opacityH);
      customGrid.style.setProperty('--opacity-v', opacityV);
      customGrid.style.setProperty('--mask-fade', maskFade);

      // Update displays
      document.getElementById('perspective-val').textContent = perspective + 'px';
      document.getElementById('rotation-val').textContent = rotation + 'deg';
      document.getElementById('grid-size-val').textContent = gridSize + 'px';
      document.getElementById('thickness-val').textContent = thickness + 'px';
      document.getElementById('opacity-h-val').textContent = opacityH;
      document.getElementById('opacity-v-val').textContent = opacityV;
      document.getElementById('mask-fade-val').textContent = maskFade + '%';
    }

    // Add event listeners
    document.querySelectorAll('input[type="range"]').forEach(input => {
      input.addEventListener('input', updateCustomGrid);
    });

    function resetControls() {
      document.getElementById('perspective').value = 500;
      document.getElementById('rotation').value = 60;
      document.getElementById('grid-size').value = 60;
      document.getElementById('thickness').value = 2;
      document.getElementById('opacity-h').value = 0.6;
      document.getElementById('opacity-v').value = 0.3;
      document.getElementById('mask-fade').value = 70;
      updateCustomGrid();
    }

    function copyCSS() {
      const perspective = document.getElementById('perspective').value;
      const rotation = document.getElementById('rotation').value;
      const gridSize = document.getElementById('grid-size').value;
      const thickness = document.getElementById('thickness').value;
      const opacityH = document.getElementById('opacity-h').value;
      const opacityV = document.getElementById('opacity-v').value;
      const maskFade = document.getElementById('mask-fade').value;

      const css = `.jarvis-container .main-content::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: -50%;
  width: 200%;
  height: 60%;
  background-image:
    linear-gradient(rgba(99, 102, 241, ${opacityH}) ${thickness}px, transparent ${thickness}px),
    linear-gradient(90deg, rgba(99, 102, 241, ${opacityV}) ${thickness}px, transparent ${thickness}px);
  background-size: ${gridSize}px ${gridSize}px;
  transform: perspective(${perspective}px) rotateX(${rotation}deg);
  transform-origin: center bottom;
  mask-image: linear-gradient(to top, black 0%, transparent ${maskFade}%);
  pointer-events: none;
  z-index: 0;
  will-change: transform;
}`;

      navigator.clipboard.writeText(css).then(() => {
        alert('CSS copied to clipboard!');
      });
    }

    // Initialize on load
    updateCustomGrid();
  </script>
</body>
</html>
